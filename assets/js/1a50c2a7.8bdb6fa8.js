"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6538],{3905:function(e,t,r){r.d(t,{Zo:function(){return p},kt:function(){return h}});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=a.createContext({}),u=function(e){var t=a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=u(r),h=n,f=c["".concat(s,".").concat(h)]||c[h]||d[h]||o;return r?a.createElement(f,i(i({ref:t},p),{},{components:r})):a.createElement(f,i({ref:t},p))}));function h(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var u=2;u<o;u++)i[u]=r[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}c.displayName="MDXCreateElement"},9847:function(e,t,r){r.r(t),r.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return d}});var a=r(7462),n=r(3366),o=(r(7294),r(3905)),i=["components"],l={sidebar_position:2},s="Turbo User Guide",u={unversionedId:"Turbo/Users",id:"Turbo/Users",title:"Turbo User Guide",description:"From a user perspective, Turbo is basically a wrapper (Safe) around a collaeralized Fuse lending position. The borrowed asset is FEI at 0% APR, and that FEI is then resupplied to earn yield into ERC-4626 strategies.",source:"@site/docs/Turbo/Users.md",sourceDirName:"Turbo",slug:"/Turbo/Users",permalink:"/docs/Turbo/Users",editUrl:"https://github.com/fei-protocol/docs/tree/gh-pages/docs/Turbo/Users.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Turbo Overview",permalink:"/docs/Turbo/Overview"},next:{title:"Liquidations and Debt",permalink:"/docs/Turbo/LiquidationsAndDebt"}},p={},d=[{value:"Basic Operations",id:"basic-operations",level:2},{value:"Deposit/Withdraw",id:"depositwithdraw",level:3},{value:"Boost/Less",id:"boostless",level:3},{value:"Slurp/Sweep",id:"slurpsweep",level:3},{value:"Risks",id:"risks",level:2},{value:"Collateral Risk",id:"collateral-risk",level:3},{value:"Yield Strategy Risk",id:"yield-strategy-risk",level:3},{value:"Advanced Operations",id:"advanced-operations",level:2}],c={toc:d};function h(e){var t=e.components,r=(0,n.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"turbo-user-guide"},"Turbo User Guide"),(0,o.kt)("p",null,"From a user perspective, Turbo is basically a wrapper (Safe) around a collaeralized Fuse lending position. The borrowed asset is FEI at 0% APR, and that FEI is then resupplied to earn yield into ERC-4626 strategies."),(0,o.kt)("p",null,"Definitions:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://v2.rari.capital/fuse"},"Fuse")," - a lending market platform where users can supply collateral and borrow any supported asset with liquidity."),(0,o.kt)("li",{parentName:"ul"},"Turbo Safe - an ERC-4626 Vault which can boost FEI and share revenue. Safe's have a single collateral but can support many yield strategies."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://eips.ethereum.org/EIPS/eip-4626"},"ERC-4626")," - a new standard for Tokenized Vaults. It represents a strategy which is itself also tokenized.")),(0,o.kt)("p",null,"Supported collateral types and yield strategies need to be added by Tribe Governance."),(0,o.kt)("p",null,"Initial Collaterals:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"TRIBE"),(0,o.kt)("li",{parentName:"ul"},"BAL"),(0,o.kt)("li",{parentName:"ul"},"gOHM")),(0,o.kt)("p",null,"Initial yield strategies"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Fuse FEI from approved pools")),(0,o.kt)("p",null,"Users of Turbo become joint issuers of FEI with the Tribe DAO, deciding which markets to supply newly minted FEI to and splitting the revenue. They generally want one or both of:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"additional yield on tokens"),(0,o.kt)("li",{parentName:"ol"},"Liquidity on FEI in a specific market")),(0,o.kt)("p",null,"Revenue splits are calculated as follows:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"If the Safe has a custom revenue split set by governance, use that."),(0,o.kt)("li",{parentName:"ol"},"If the Collateral associated with the Safe has a custom revenue split, use that"),(0,o.kt)("li",{parentName:"ol"},"Use the default revenue split.")),(0,o.kt)("p",null,"Safes are created with a default access control which allows the creator (user), router, and savior to access the safe. The router allows the user to perform multiple actions at once. The Savior allows any EOA to delever the vault when it exceeds a safe collateralization threshold."),(0,o.kt)("p",null,"See advanced operations for how to override this access control."),(0,o.kt)("h2",{id:"basic-operations"},"Basic Operations"),(0,o.kt)("p",null,"Turbo users can perform the following basic actions on their Safes:"),(0,o.kt)("h3",{id:"depositwithdraw"},"Deposit/Withdraw"),(0,o.kt)("p",null,"Add and remove collateral which can be used to boost or improve borrowing health factor. This is always denominated in a single token per Safe e.g. TRIBE or BAL."),(0,o.kt)("p",null,"These follow the ERC-4626 interface and include mint/redeem as well."),(0,o.kt)("h3",{id:"boostless"},"Boost/Less"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"    /// @notice Borrow Fei from the Turbo Fuse Pool and deposit it into an authorized Vault.\n    /// @param vault The Vault to deposit the borrowed Fei into.\n    /// @param feiAmount The amount of Fei to borrow and supply into the Vault.\n    function boost(ERC4626 vault, uint256 feiAmount) external\n")),(0,o.kt)("p",null,"Boosting is borrowing FEI and depositing it into a yield strategy."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"    /// @notice Withdraw Fei from a deposited Vault and use it to repay debt in the Turbo Fuse Pool.\n    /// @param vault The Vault to withdraw the Fei from.\n    /// @param feiAmount The amount of Fei to withdraw from the Vault and repay in the Turbo Fuse Pool.\n    function less(ERC4626 vault, uint256 feiAmount) external;\n")),(0,o.kt)("p",null,"Lessing is the inverse of boosting."),(0,o.kt)("p",null,"Note that Tribe governance can less any Safe at any time to contract the FEI supply. This would be a matter of monetary policy to protect the FEI peg in the event of a demand shock."),(0,o.kt)("h3",{id:"slurpsweep"},"Slurp/Sweep"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"/// @notice Accrue any interest earned by the Safe in the Vault.\n/// @param vault The Vault to accrue interest from, if any.\n/// @dev Sends a portion of the interest to the Master, as determined by the Clerk.\nfunction slurp(ERC4626 vault) external;\n")),(0,o.kt)("p",null,"Slurp - accrues fees earned on the FEI yield strategies on the safe. This operation is done per safe. The Tribe governance share of the revenue split FEI is sent there. The Safe owner's share is withdrawn to the Safe where it can then be swept."),(0,o.kt)("p",null,"NOTE Tribe Governance can slurp on a Safe at any time to claim its fees."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"/// @notice Claim tokens sitting idly in the Safe.\n/// @param to The recipient of the sweeped tokens.\n/// @param token The token to sweep and send.\n/// @param amount The amount of the token to sweep.\nfunction sweep(\n    address to,\n    ERC20 token,\n    uint256 amount\n) external;\n")),(0,o.kt)("p",null,"Sweep - withdraw fei accrued as interest or other tokens laying idle in a safe. To get FEI interest into the Safe, first less the entire balance. (",(0,o.kt)("a",{parentName:"p",href:"https://linear.app/fei/issue/DEV-2678/add-skim-to-turbo"},"TODO")," consider adding a skim method to free up surplus FEI)."),(0,o.kt)("h2",{id:"risks"},"Risks"),(0,o.kt)("p",null,"The risks of using Turbo are similar to a normal lending market, with some risks reduced and other unique Turbo-specific risks."),(0,o.kt)("p",null,"There are two different types of risks to the Safe holder, collateral risk and yield strategy risk."),(0,o.kt)("h3",{id:"collateral-risk"},"Collateral Risk"),(0,o.kt)("p",null,"A collateral can be liquidated like a normal Fuse position. If this happens, all FEI debt would be repayed by the safe. This means the boosted amount becomes equity which the Safe holder can sweep."),(0,o.kt)("p",null,"In other words, liquidation effectively means the user's collateral was force sold into the FEI yield strategies the Safe is holding. The revenue split will continue to apply to all interest. "),(0,o.kt)("h3",{id:"yield-strategy-risk"},"Yield Strategy Risk"),(0,o.kt)("p",null,'The yield strategy where FEI is deployed may become insolvent due to bad debt or some kind of vulnerability. Because the vault can no longer "less", the Turbo Safe begins to incur the risk of this bad debt. If the vault holder cannot repay, Tribe Governance can repay and sieze the collateral using the ',(0,o.kt)("inlineCode",{parentName:"p"},"gib")," operation."),(0,o.kt)("h2",{id:"advanced-operations"},"Advanced Operations"),(0,o.kt)("p",null,"Safe holders can expose the basic operations to smart contracts or other users according to arbitrary logic by replacing the Safe's ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/Rari-Capital/solmate/blob/main/src/auth/Auth.sol"},"Authority")),(0,o.kt)("p",null,"This would remove the Router and Savior's access unless it is re-granted in the new authority."),(0,o.kt)("p",null,"Only replace the Authority if you are sure you know what you are doing, this operation can risk the user's collateral if done incorrectly."))}h.isMDXComponent=!0}}]);