"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7588],{3905:function(e,t,o){o.d(t,{Zo:function(){return p},kt:function(){return h}});var r=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var s=r.createContext({}),c=function(e){var t=r.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var o=e.components,n=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(o),h=n,f=d["".concat(s,".").concat(h)]||d[h]||u[h]||a;return o?r.createElement(f,i(i({ref:t},p),{},{components:o})):r.createElement(f,i({ref:t},p))}));function h(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=o.length,i=new Array(a);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var c=2;c<a;c++)i[c]=o[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,o)}d.displayName="MDXCreateElement"},1469:function(e,t,o){o.r(t),o.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return u}});var r=o(7462),n=o(3366),a=(o(7294),o(3905)),i=["components"],l={sidebar_position:3},s=void 0,c={unversionedId:"protocol/Mechanism/Collaterization",id:"protocol/Mechanism/Collaterization",title:"Collaterization",description:'The "collateralization" is the ratio between the Protocol Controlled Value and the User-Circulating FEI (FEI tokens that are not held by the protocol\'s PCV Deposits). It represents the dollar-value of assets held in the protocol, that can be used to back the FEI in circulation at 1$.',source:"@site/docs/protocol/Mechanism/Collaterization.md",sourceDirName:"protocol/Mechanism",slug:"/protocol/Mechanism/Collaterization",permalink:"/docs/protocol/Mechanism/Collaterization",editUrl:"https://github.com/fei-protocol/docs/tree/gh-pages/docs/protocol/Mechanism/Collaterization.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Peg stability module",permalink:"/docs/protocol/Mechanism/PegStabilityModule"},next:{title:"Buybacks",permalink:"/docs/protocol/Mechanism/Buybacks"}},p={},u=[{value:"Undercollateralization Recovery",id:"undercollateralization-recovery",level:2}],d={toc:u};function h(e){var t=e.components,o=(0,n.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,'The "collateralization" is the ratio between the ',(0,a.kt)("a",{parentName:"p",href:"/docs/protocol/Mechanism/PCVManagement"},"Protocol Controlled Value")," and the User-Circulating FEI (FEI tokens that are not held by the protocol's ",(0,a.kt)("a",{parentName:"p",href:"/docs/protocol/Mechanism/PCVDeposits"},"PCV Deposits"),"). It represents the dollar-value of assets held in the protocol, that can be used to back the FEI in circulation at 1$."),(0,a.kt)("p",null,"The Collateralization Ratio is expressed as a percentage, for instance if 100$ of assets are held in the protocol (PCV), and there are 50 User-Circulating FEI, the Collateralization Ratio is 200%."),(0,a.kt)("p",null,"The ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/fei-protocol/fei-protocol-core/blob/develop/contracts/oracle/collateralization/CollateralizationOracle.sol"},"Collateralization Oracle")," is a contract ",(0,a.kt)("a",{parentName:"p",href:"https://etherscan.io/address/0xFF6f59333cfD8f4Ebc14aD0a0E181a83e655d257"},"deployed on-chain")," that reports the list of token addresses of each asset held in the PCV ",(0,a.kt)("inlineCode",{parentName:"p"},"getTokensInPcv()"),", and for each token address, the list of PCV Deposits that hold it ",(0,a.kt)("inlineCode",{parentName:"p"},"getDepositsForToken(address)"),". The oracle also holds a mapping of token to oracle ",(0,a.kt)("inlineCode",{parentName:"p"},"tokenToOracle(address)"),' to know the "asset to USD" conversion for each of the PCV assets. A helper method ',(0,a.kt)("inlineCode",{parentName:"p"},"pcvStats()")," is present and returns the PCV, user-circulating FEI (defined as FEI ",(0,a.kt)("inlineCode",{parentName:"p"},"totalSupply()")," minus FEI held by PCV Deposits), PCV Equity (PCV minus user-circulating FEI), and a validity status."),(0,a.kt)("p",null,"In the CR Oracle, a special token address ",(0,a.kt)("inlineCode",{parentName:"p"},"0x1111...1111"),' is used to represent "USD". This is used for instance for LP tokens of stableswaps (like Curve) where the amount of stablecoins owned is known, but not the percent of each of the underlying stablecoins.'),(0,a.kt)("p",null,"By convention, FEI deposited in lending markets is reported as both PCV asset worth 0$, and protocol-owned FEI (to be deduced from circulating supply)."),(0,a.kt)("p",null,"Reading the CR Oracle on-chain is very expensive, and should only be used in extreme situations. For instance, when Collateralization drops below 100%, the protocol can trigger backstop mechanisms to drain the amount of FEI in circulation & restore the CR above 100%."),(0,a.kt)("h2",{id:"undercollateralization-recovery"},"Undercollateralization Recovery"),(0,a.kt)("p",null,"Fei Protocol can set a reserve ratio target <= 100% (currently exactly 100%). When the collateralization is below the target, the ",(0,a.kt)("a",{parentName:"p",href:"/docs/protocol/smart-contract-api/tribe/stabilizer/TribeReserveStabilizer"},"TribeReserveStabilizer")," allows users to buy FEI at $1 for newly minted TRIBE."),(0,a.kt)("p",null,'There is one protection in place to protect against oracle issues and short term volatility, the "oracle delay". To begin the recovery, the oracle delay countdown must first be triggered once the protocol is under the reserve ratio. This is a configurable window, currently 24 hours. If the reserve ratio goes above the target during the delay window, this process can be reset.'))}h.isMDXComponent=!0}}]);